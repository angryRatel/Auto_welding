# 🤖 Auto Weld: ROS2 기반 용접 협동 로봇 자동화 공정 시스템

> 두산 로봇팔(M0609 모델)을 활용하여 2D 및 3D 용접 작업과 안전기능을 구현한 ROS2 기반 협동 로봇 자동화 프로젝트입니다.

---

### 자세한 설명이 필요한 부분은 pdf, ppt 파일을 참고하세요.

---

## 🎥 실제 시연 영상  
[![Demo Video](https://img.youtube.com/vi/wykA4MYREYk/0.jpg)](https://youtu.be/wykA4MYREYk)


---

## 📑 코드 저장소  
- GitHub: [DoosanBootcam3rdCo1](https://github.com/ROKEY-SPARK/DoosanBootcam3rdCo1.git)  
  > `dsr_rokey/rokey/rokey/basic` 경로 내 수정된 파일 구조 사용

---

## 1. 📊 개발 과정

### 프로젝트 배경

  - 심각한 용접 인력 부족 문제  
  - 미국의 경우 2025~2029년까지 매년 8만 명 이상의 신규 용접 인력이 필요하며, 누적 32만 명 공백 예상  
  - 생산성 향상 필요성  
  - 중국 제조업체가 DOBOT CRA 협동로봇 도입 후 MIG 공정 생산성 30% 향상

**용접 협동로봇을 통해 작업인력 수요 해결, 생산 효율성 증대 및 작업자의 안전 증대를 목표**

### 📅 작업 일정

| 날짜                  | 작업 내용 요약                  |
|-----------------------|-------------------------------|
| 2025.05.23 ~ 2025.05.26 | 프로젝트 기획 및 주제 선정        |
| 2025.05.27 ~ 2025.05.29 | 2D 용접 및 3D 용접 기능 개발     |
| 2025.05.30             | 통합 테스트 및 중간 점검           |
| 2025.06.01 ~ 2025.06.03 | 최적화 및 안전 기능 추가           |
| 2025.06.04 ~ 2025.06.05 | 최종 테스트 및 시연 준비           |
| **총 개발 기간**        | **10일**                       |

---

### 📷 사용 환경

![개발환경](images/사용환경.png)

---

## 2. 🛠 주요 기능 구현 과정

- 규칙적인 2D 용접 작업 (UI 노드 + 제어 노드 분리)  
- 불규칙적인 2D 용접 경로 이미지 기반 좌표 추출 및 경로 이동  
- 규칙적인 3D 용접 기능 (GUI 기반 좌표 교시 및 원주 용접)  
- 힘 감지 기반 안전 기능 (힘 감지 시 경고음 발생)

---

## 3. 💡 도전 과제와 문제 해결 방법

- **문제**: ROS2 내 원주 구속 자세 미지원 → 2D 좌표 세 점 교시로 대체  
- **문제**: 불규칙 경로 좌표 로봇 범위 초과 문제 → 좌표 스케일링 적용  
- **문제**: 힘 감지 민감도 조절 및 신뢰성 확보 → threshold 조절 및 모니터링 함수 구현  
- **문제**: UI와 제어 노드 간 통신 최적화 → 메시지 publish/subscribe 기반 통신 설계

---

## 4. 👥 협업 내용 및 역할 분담

| 이름   | 역할                      |
|--------|---------------------------|
| 최정호 | 규칙적 2D 용접 UI/제어 개발 |
| 이하빈 | 불규칙 2D 용접 경로 추출 및 좌표 스케일링 |
| 이세현 | 3D 용접 GUI 및 좌표 교시 기능 구현  |
| 홍진규 | 힘 감지 기반 안전 기능 및 예외 처리 작성 |

팀원 모두의 협업으로 프로젝트 완성 및 핵심 기능 분담 개발

---

## 5. 🎯 성과 및 결과물

- 규칙적 2D 용접 및 불규칙 2D 용접 경로 제어 성공  
- 3D 용접 GUI 기반 좌표 교시 및 원주 용접 구현  
- 힘 감지 기반 작업 중단 및 경고음 동작 안전 기능 완성  
- ROS2 노드 간 메시지 통신 안정화 및 실시간 제어 구현

---

## 6. 📈 프로젝트 결과 (목표와 성과)

- **목표**: ROS2 기반 두산 협동로봇 자동 용접 공정 구축  
- **성과**:  
  - UI와 제어 노드 분리 설계로 작업 효율성 증대  
  - 이미지 기반 경로 좌표 추출 및 스케일링 적용  
  - 3D 좌표 교시 GUI 완성 및 용접 사이클 타임 단축  
  - 안전 기능 내장으로 작업자 및 장비 보호

---

## 7. 📸 프로젝트 화면 및 기능 데모

### 7-1) 규칙적인 2D 용접 UI 및 통신  
![규칙적인 2D 용접 UI](https://github.com/user-attachments/assets/e469747a-4e20-47d1-b025-00048b228b06)  
![2D 용접 노드 통신](https://github.com/user-attachments/assets/a66a08c7-2903-4365-af4d-7555b3660348)

---

### 7-2) 불규칙적인 2D 용접 경로 추출 및 좌표 스케일링  
![경로 이미지](https://github.com/user-attachments/assets/7cf1485a-9ca2-4930-8a24-a68b1d7a28ff)  
![불규칙 2D 용접 노드 구조](https://github.com/user-attachments/assets/52052adb-73c8-47b4-997b-3c75abac1c29)

---

### 7-3) 규칙적인 3D 용접 GUI 및 노드 통신  
![3D 용접 GUI](https://github.com/user-attachments/assets/3616910a-82c0-49c0-b7d4-073c56b5a90b)  
![3D 용접 노드 통신](https://github.com/user-attachments/assets/81421d74-08e1-4a6a-a9a2-2ec8a4b83d33)

---

### 7-4) 안전 기능 (힘 감지 및 경고음)  
![힘 감지 코드](https://github.com/user-attachments/assets/bdf16ad0-dcb3-438e-bfac-0f345daa175d)

```python
# 충격 감지 함수 예시
def monitor_impact(get_tool_force, get_current_posx, movel, VELOCITY, ACC):
    # 구현 내용
    pass
