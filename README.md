# 🤖 Auto Weld: ROS2 기반 용접 협동 로봇 자동화 시스템

> 두산 로봇팔(M0609)을 활용하여 **2D/3D 용접 자동화** 및 **충돌 감지 안전 기능**을 구현한 ROS2 기반 협동로봇 프로젝트입니다.

---

## 🎥 시연 영상  
[![Demo Video](https://img.youtube.com/vi/wykA4MYREYk/0.jpg)](https://youtu.be/wykA4MYREYk)

## 📁 전체 코드 저장소  
GitHub: [DoosanBootcam3rdCo1](https://github.com/ROKEY-SPARK/DoosanBootcam3rdCo1.git)  
> 주요 경로: `dsr_rokey/rokey/rokey/basic`

---

## 1. 📊 개발 과정

### 프로젝트 배경

- **용접 인력 부족 문제**  
  미국 기준 2025~2029년까지 매년 8만 명 이상 인력 수요 발생, 누적 공백 32만 명 이상  
- **산업 생산성 향상**  
  중국 제조업체, DOBOT CRA 협동로봇 도입 후 MIG 공정 생산성 30% 향상  
- **작업자 안전 문제**  
  고열, 아크광선, 유해가스 등으로 인한 위험성 상존  

> **목표** : 작업 자동화로 인력 수요 해소, 생산 효율 및 안전성 향상  

📅 **일정 요약**

| 기간 | 작업 내용 |
|------|-----------|
| 5/14 ~ 5/15 | 기획 및 주제 선정 |
| 5/15 ~ 5/16 | 자료조사 및 레퍼런스 분석 |
| 5/17 ~ 5/18 | 기능별 코드 개발 |
| 5/19 ~ 5/20 | 중간 점검 및 통합 |
| 5/20 ~ 5/21 | 최종 테스트 및 시연 준비 |
|총 개발 기간 | 	5/14(수) ~ 5/21(목)(8일)
---
## 🧪 사용 환경
![개발환경](https://github.com/user-attachments/assets/9129f23b-ecac-4ec5-9c63-fc5bf04a28b9)


---
## 2. 🛠 주요 기능  

- ✅ 규칙적인 2D 용접: 시작점과 도착점을 교시하여 직선 이동  
- ✅ 불규칙 2D 용접: 이미지 기반 경로 추출 → 좌표 스케일링 → CSV 기반 자동 이동  
- ✅ 규칙적 3D 용접: 3점 캡처 → 원 중심/반지름 계산 → movec 활용 원호 이동  
- ✅ 충돌 감지 기능: force 값을 기반으로 경고음, 팝업, 로봇 정지 동작 실행

---

## 3. 💡 도전 과제 & 해결 

| 도전 과제 | 해결 방법 |
|-----------|-----------|
| ROS2에서 원호 구속자세 미지원 | 3점 교시로 중심 계산 후 movec로 구현 |
| 로봇 작업 범위 벗어나는 좌표 발생 | 좌표 스케일링 알고리즘 도입 |
| 외력 감지 민감도 낮음 | threshold 값 조정 및 monitor 함수 구현 |
| Tkinter GUI와 ROS2 간 충돌 | UI 노드와 제어 노드 분리 구조 설계 |

---

## 4. 👥 팀원 역할 분담

| 이름 | 역할 |
|------|------|
| 최정호 | 팀장, 규칙적 2D 용접 경로 구현 |
| 이하빈 | 불규칙적 2D 용접 경로 구현 |
| 이세현 | 규칙적 3D 용접 경로 구현 |
| 홍진규 | 충돌 감지 후 즉시 정지(안전기능) |

모든 기능은 역할을 명확히 나누고 병렬적으로 개발하여 일정 내 완성했습니다.

---

## 5. 🎯 프로젝트 성과

- ROS2 기반 자동 용접 시스템 구조 완성  
- GUI 기반 좌표 캡처, CSV 저장, 원호 계산 등 기능 통합  
- 충돌 감지 시 경고 + 팝업 + 정지 동작 정상 작동  
- 프로젝트 시연 100% 성공 (2D, 3D, 안전기능 포함)


---

## 6. 📸 프로젝트 화면 및 기능 데모 

### ✅ 규칙적 2D 용접
- 시작점~도착점 교시 → 직선 이동  
![2D UI](https://github.com/user-attachments/assets/e469747a-4e20-47d1-b025-00048b228b06)
### 시스템 아키텍처
![2D 통신](https://github.com/user-attachments/assets/a66a08c7-2903-4365-af4d-7555b3660348)
### ✅ 불규칙적 2D 용접
- 이미지에서 경로 추출 → 좌표 변환 → CSV 실행  
![불규칙 이미지](https://github.com/user-attachments/assets/7cf1485a-9ca2-4930-8a24-a68b1d7a28ff)
### 시스템 아키텍처
![불규칙 노드](https://github.com/user-attachments/assets/52052adb-73c8-47b4-997b-3c75abac1c29)

### ✅ 규칙적 3D 용접 (GUI 기반)
- P1~P3 좌표 캡처 → 원 계산 → movec 실행  
![3D GUI](https://github.com/user-attachments/assets/3616910a-82c0-49c0-b7d4-073c56b5a90b)
### 시스템 아키텍처
![3D 통신](https://github.com/user-attachments/assets/81421d74-08e1-4a6a-a9a2-2ec8a4b83d33)

### ✅ 충돌 감지 및 안전 기능
- Force 임계치 초과 시 경고음, 팝업, 정지  
![안전 코드](https://github.com/user-attachments/assets/bdf16ad0-dcb3-438e-bfac-0f345daa175d)

---

## 7. ✏ 후기 및 향후 개선 사항 

- ✔ GUI와 제어 노드 간 충돌이 있어 완전 통합에 일부 제약  
- ✔ 원주 방향 자세 제어 미지원 → movec 대체로 해결했으나 한계 존재  
- 🔧 향후 개선: 원주방향 지원이 가능한 moveC 개선 및 시뮬레이션 최적화

---

## 8. 🎓 개인적 성장 및 배운 점 

- ROS2 통신 구조에 대한 실전 이해  
- 센서 데이터 처리 및 안전 기능 설계  
- 협업 및 코드 통합 과정에서 팀워크 향상  
- GUI → 센서 → 제어 시스템 흐름에 대한 총체적 경험

---

## 9. 🚀 개선 및 확장 아이디어 

- 📸 **Machine Vision 품질 검사** 시스템 연동  
  > (OpenCV + AI 모델 + CNN 결함 판단 알고리즘)  
- 📶 **MQTT 기반 IoT 확장** 및 다로봇 통신  
- 🤖 **자가학습 기반 경로 최적화** 로직 도입  
- 📱 **모바일 앱 GUI 제어** 기능 개발

---



---

> 본 프로젝트는 **산업용 용접 자동화 기술의 실용성과 확장 가능성**을 실증한 사례로, 스마트 팩토리 및 협동로봇 기반 공정 자동화에 중요한 인사이트를 제공합니다.
